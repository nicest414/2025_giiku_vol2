# Amazon Cart Scraper with AI - メスガキAI購買抑制拡張機能 

Amazonでのお買い物を**生意気なメスガキAI**が邪魔してくる Chrome拡張機能です
衝動買いを防ぎたいけど、可愛く罵られたい人におすすめ 

## 🎯 機能概要

- **Amazonカート情報自動取得**: カートに入れた商品を自動でスキャン
- **AI毒舌コメント生成**: OpenAI APIを使って各商品に対して生意気なコメント
- **購買抑制システム**: 決済ページに進もうとすると強制的に介入
- **クールダウンタイマー**: 30秒の待機時間で冷静な判断を促す
- **可愛いUI**: ピンク系デザインでメスガキキャラとの会話を楽しむ

## 🚀 セットアップ手順

### 1. 環境準備

```bash
# 依存関係をインストール
npm install

# OpenAI APIキーを設定
# .env ファイルを作成して以下を追加
REACT_APP_OPENAI_API_KEY=your_openai_api_key_here
```

### 2. Reactアプリをビルド

```bash
# 本番用ビルドを作成
npm run build

# ビルドファイルをChrome拡張フォルダにコピー
# build フォルダの内容を chrome_extention/build/ にコピー
```

### 3. Chrome拡張機能をインストール

1. Chromeブラウザで `chrome://extensions/` を開く
2. 「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. `chrome_extention` フォルダを選択

## 📖 使用方法

### 基本的な流れ

1. **Amazon.co.jpでお買い物**: 普通にカートに商品を追加
2. **決済ページに進む**: 「レジに進む」ボタンをクリック
3. **メスガキAI介入**: 自動的にAI分析ページに遷移
4. **毒舌コメント鑑賞**: 各商品に対する辛辣なコメントを読む
5. **30秒のクールダウン**: 冷静になる時間が強制的に設けられる
6. **最終判断**: 本当に買うかどうか再考する

### コマンド

```bash
# 開発サーバー起動 (React部分の開発用)
npm start

# テスト実行
npm test

# 本番ビルド (拡張機能用)
npm run build
```

## 🛠 技術スタック

- **フロントエンド**: React 19.1.0
- **AI**: OpenAI API (GPT-3.5-turbo)
- **拡張機能**: Chrome Extension Manifest V3
- **スクレイピング**: Content Scripts
- **UI**: カスタムCSS (ピンク系デザイン)

## 📁 プロジェクト構造

```
├── chrome_extention/          # Chrome拡張機能本体
│   ├── manifest.json         # 拡張機能の設定
│   ├── content.js           # Amazonページでのスクレイピング
│   ├── background.js        # バックグラウンド処理
│   ├── popup.html           # 拡張機能ポップアップ
│   └── build/               # Reactアプリのビルド結果
├── src/                     # Reactアプリソース
│   ├── App.js              # メインアプリケーション
│   ├── ai.js               # OpenAI API連携
│   └── App.css             # スタイルシート
└── public/                  # 静的ファイル
```

## ⚙️ 設定

### 環境変数

`.env` ファイルに以下を設定:

```env
REACT_APP_OPENAI_API_KEY=your_openai_api_key_here
```

### AIキャラクター設定

`src/ai.js` でメスガキキャラの性格を調整可能:
- 口調の変更
- 毒舌レベルの調整
- 新しいセリフパターンの追加

## 🔧 カスタマイズ

### キャラクター画像の変更

`src/App.js` の `createProductHTML` 関数内の画像URLを変更

### 待機時間の調整

`src/App.js` の `timeLeft = 30` の値を変更

### スクレイピング対象の調整

`chrome_extention/content.js` のセレクタを修正

## 🚨 注意事項

- **APIキーの管理**: OpenAI APIキーは適切に管理してください
- **利用料金**: AI APIの使用により料金が発生します
- **Amazon利用規約**: Amazonの利用規約に従ってご使用ください
- **セキュリティ**: 本拡張機能は開発・学習目的で作成されています

## 🐛 トラブルシューティング

### よくある問題

1. **カート情報が取得できない**
   - Amazonページが完全に読み込まれるまで待つ
   - content.js の遅延時間を調整

2. **AI応答が表示されない**
   - OpenAI APIキーが正しく設定されているか確認
   - ネットワーク接続を確認

3. **拡張機能が動作しない**
   - Chrome拡張の権限設定を確認
   - manifest.json の設定を見直し

##  ライセンス

このプロジェクトは学習・研究目的で作成されています。  
商用利用する場合は、各種APIの利用規約をご確認ください。

##  今後の拡張アイデア

### キャラクター・AI機能拡張

#### 複数キャラクター対応
- **ツンデレお姉さん**: 「別に...あんたのためじゃないんだからね」系
- **厳格な執事**: 「お坊ちゃま、この出費は如何なものかと」系  
- **関西弁のおばちゃん**: 「あんた、ほんまにそれ要るん？」系
- **推しVTuber風**: 配信者っぽい口調でコメント

#### AI分析機能強化
- **価格履歴分析**: 過去の価格データと比較して「今買うべきかどうか」判定
- **類似商品提案**: より安い代替品をAIが探してくる
- **必要度スコア**: 商品の緊急度を1-10で評価
- **予算管理**: 月の支出目標と照らし合わせて警告

###  ショッピングサイト対応拡張

#### ECサイト拡張（ブラウザベース）
```javascript
// 楽天市場の決済ページ遷移を監視
"https://checkout.rakuten.co.jp/*"

// Yahoo!ショッピングの決済ページ
"https://order.shopping.yahoo.co.jp/*"

// Qoo10の決済ページ
"https://www.qoo10.jp/gmkt.inc/Order/*"

// ZOZOTOWN決済
"https://zozo.jp/order/*"
```

#### 各サイトの特殊対応
- **メルカリ**: 購入ボタンクリック時に介入
- **ヤフオク**: 入札・即決時の強制一時停止
- **BASE**: 個人ショップの決済フロー対応
- **Shopify系**: 海外通販サイトでの衝動買い防止

> **ポイント**: あくまで「決済直前の強制介入」がメイン機能！  
> ブラウザ拡張でこそ実現できる独特な体験 

#### 購買履歴管理
- **購入データベース**: 過去の買い物履歴を記録
- **後悔率統計**: 「結局使わなかった商品」の傾向分析
- **リピート購入検知**: 「また同じようなもの買おうとしてるよ」警告

### データ分析・可視化

#### ダッシュボード機能
- **月次支出グラフ**: 棒グラフ・円グラフで支出を可視化
- **カテゴリ別分析**: ファッション・電子機器・食品etc.の比率
- **衝動買い率**: メスガキに止められた回数 vs 実際に購入した回数

#### レポート機能
```javascript
// 月次レポート生成
generateMonthlyReport() {
  return {
    totalSaved: "¥15,670", // メスガキに止められて節約できた金額
    impulseBlockCount: 12,  // 衝動買い阻止回数
    characterRating: "★★★★☆" // キャラクターの働きぶり評価
  }
}
```

### ゲーミフィケーション

#### 実績システム
- **節約マスター**: 月10万円節約達成
- **メスガキ耐性**: 毒舌を100回聞いても買い物した
- **冷静沈着**: クールダウンタイマーを50回完走

#### レベルシステム
```javascript
const userLevel = {
  level: 15,
  title: "見習い節約家",
  nextTitle: "中級ケチケチマスター",
  exp: 2450,
  expToNext: 550
}
```

### 外部サービス連携

#### 家計簿アプリ連携
- **Moneytree API**: 実際の口座残高と連動
- **Zaim API**: 家計簿データと同期
- **LINE Pay**: 決済データの取得

#### SNS連携
- **Twitter投稿**: 「今日もメスガキに止められました #節約 #メスガキAI」
- **Discord Bot**: サーバーで節約報告
- **LINE通知**: 「またAmazon見てるでしょ？」警告

### より強力な介入システム

#### 段階的エスカレーション
```javascript
// 1回目: 軽い警告
// 2回目: メスガキの毒舌強化
// 3回目: 画面を一時的にロック
// 4回目: 「本気で止めに来た」モード
const interventionLevel = calculateUserResistance();
```

#### 心理的圧迫強化
- **罪悪感システム**: 「また無駄遣いするの？」カウンター表示
- **過去の後悔提示**: 「前回買った○○、使ってないよね？」
- **家族の顔表示**: 「お母さんが泣いてるよ」演出
- **貯金目標との比較**: 「これ買ったら旅行資金が...」

#### 物理的阻止機能
- **マウス操作妨害**: 購入ボタン周辺でカーソルが震える
- **キーボード無効化**: 一定時間入力を無効にする
- **画面効果**: 画面がゆっくり暗転していく演出

#### バックエンド化
```javascript
// Express.js サーバー構築
app.post('/api/ai-response', async (req, res) => {
  // OpenAI APIをサーバーサイドで処理
  // APIキー隠蔽 + レート制限実装
})
```

#### データ暗号化
- **Chrome Storage暗号化**: 購買履歴を暗号化して保存
- **HTTPS通信**: 全ての通信をSSL化

### 📱 ブラウザ拡張機能の拡張

#### 他ブラウザ対応
- **Firefox拡張**: WebExtensions APIで移植
- **Edge拡張**: Chromium版Edgeで互換性確保
- **Safari拡張**: macOSユーザー向け対応

#### モバイルブラウザ対応
- **Kiwi Browser**: Android用Chrome系ブラウザで拡張機能対応
- **Firefox Mobile**: Androidでアドオン対応
- **iOS Safari拡張**: iOS 15+のSafari拡張機能


#### より精密な介入タイミング
```javascript
// URL遷移だけでなく、動作パターンも監視
const suspiciousBehavior = {
  rapidClicking: true,        // 連続クリック検知
  lateNightShopping: true,    // 深夜の買い物警告
  repeatVisits: true,         // 同じ商品に何度も戻る
  priceJumping: true         // 高額商品への急な移行
};

// リアルタイム介入
if (detectImpulsiveBehavior()) {
  triggerEmergencyIntervention();
}
```

#### コンテキスト認識強化
- **時間帯分析**: 深夜・給料日直後は警戒レベル MAX
- **閲覧履歴**: 「30分で10個も見てるじゃん」警告
- **価格帯ジャンプ**: 「いきなり高額商品？怪しい」検知
- **決済手段監視**: クレカ選択時に最終警告

#### 学習機能
- **個人の傾向学習**: よく買う商品ジャンルを記憶
- **効果的な口調学習**: どの言い方が一番効くか分析
- **タイミング最適化**: いつ介入するのがベストか学習

### 💰 マネタイズ機能

#### サブスクリプション
- **プレミアムキャラ**: 月額500円で追加キャラ解放
- **AI分析強化**: 月額1000円で詳細レポート

#### アフィリエイト連携
- **代替商品提案**: より安い商品を提案してアフィリエイト収益

### 🎨 UI/UX強化

#### テーマシステム
```css
/* ダークモード */
.dark-theme {
  background: linear-gradient(135deg, #2d1b69, #11998e);
}

/* 季節テーマ */
.christmas-theme {
  background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
}
```

#### アニメーション強化
- **Live2D**: キャラクターがもっと動く
- **音声合成**: テキストを実際に喋らせる
